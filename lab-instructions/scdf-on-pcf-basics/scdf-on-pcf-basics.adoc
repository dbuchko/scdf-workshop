= SCDF on PCF Basics
:toc: right
:imagesdir: img

[abstract]
--
Start working with the SCDF service on PCF.

--

Estimated Time: TBD

== Prerequisites

https://docs.pivotal.io/scdf/index.html[SCDF on PCF Reference Documentation]

. Install CF CLI plugins, as per the documentation.

+
```
cf install-plugin -r CF-Community "spring-cloud-dataflow-for-pcf"
```

+
```
cf install-plugin -r CF-Community "Service Instance Logging"
```

. Work through the https://docs.pivotal.io/scdf/getting-started.html[Getting Started Guide] from the documentation.

+
Create the service:

+
```
cf create-service p-dataflow standard scdf-svc
```


+
Once the service has been created, you should see output similar to the following:

+
image::svc-created.png[]

. Continue with the instructions to launch the dataflow shell.

+
image::shell-startup.png[]

. Import the stream app starters.
+
NOTE: Change the URL of the stream app starters from the SR1 release in the docs, to the SR2 release.  i.e Change `http://bit.ly/Celsius-SR1-stream-applications-rabbit-maven` to `https://bit.ly/Celsius-SR2-stream-applications-rabbit-maven`.

+
```
app import https://bit.ly/Celsius-SR2-stream-applications-rabbit-maven
```

+
image::stream-starter-import.png[]

. Create the sample stream from the documentation.

+
```
stream create --name words --definition "http | splitter --expression=payload.split(' ') | log"
```

. Deploy the stream, then test it using curl - posting to the HTTP source app URL.  You should tail the log sink application to see the output.

+
```
curl -X POST -H "Content-Type: text/plain" --data "This is a test" http://words-http-v1.apps.dbuchko.pivotaledu.io
```

+
image::simple-log-out.png[]
